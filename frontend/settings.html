<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="style/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" type="img/png" href="./logo.png">
    <style>
        .bg-none{
            background-color:#f5f5f5;
        }
        .Quick-actions{
            border-bottom: none;
        }
    </style>
</head>
<body>
    <script>
        function populateUserInfo() {
            fetch('../backend/getuser.php', { credentials: 'include' })
                .then((response) => response.json())
                .then((data) => {
                    if (data.error) return;

                    const roleEl = document.querySelector('.role');
                    const nameEl = document.querySelector('.username');
                    const backLink = document.querySelector('.backButton');
                    const backText = backLink ? backLink.querySelector('span') : null;

                    if (nameEl && data.fullName) nameEl.textContent = data.fullName;
                    if (roleEl && data.userType) roleEl.textContent = data.userType;

                    if (backLink && data.userType) {
                        if (data.userType === 'Officer') {
                            backLink.setAttribute('href', 'officerdasboard.html');
                            if (backText) backText.textContent = 'Back to Officer Dashboard';
                        } else {
                            backLink.setAttribute('href', 'citizendashboard.html');
                            if (backText) backText.textContent = 'Back to Dashboard';
                        }
                    }
                })
                .catch((error) => console.error('Error fetching user info:', error));
        }

        document.addEventListener('DOMContentLoaded', populateUserInfo);
        </script>
    <header>
        <div class="container" style="min-height:60px">
            <div class="sub-container">
                <div class="logo">
                <img src="images/logo.png" alt="logo">
                </div>
                <div class="title">
                <h1 class="Heading1" id="Heading1">Nikaas</h1>
                </div>
            </div>
            <div class="auth-buttons">
                <button id="language-toggle" onclick="LanguageTranslate()">
                    <i class="material-icons">language</i> नेपाली
                </button>
               <i class="material-icons" id="notifications-icon">notifications</i>
                <div class="profile-sections">
                    <i class="material-icons" id="profile-icon">account_circle</i>
                    <div class="user-type">
                    <div class="username">UserName</div>
                    <div class="role">Citizen</div>
                    </div>
                </div>
               </div>
            </div>
    </header>

<div class="main-divider">
    <div class="dashboard-container">
        <div class="backButtonContainer">
            <a href="citizendashboard.html" class="backButton">
                <i class="material-icons">arrow_back</i>
                <span>Back to Dashboard</span>
            </a>
        </div>
        
        <div class="registrationDetails securitySettings">
            <div class="profile123">
                <p class="profileDesc"> Security Settings</p>
                    <i class="material-icons profileIcon" style="color:rgb(200, 0, 0);">security</i>
            </div>
            <div class="settingsContainer">
                <div class="settingItem">
                    <div class="settingInfo">
                        <p class="settingTitle">Change Password</p>
                        <p class="settingDesc">Update your account password</p>
                    </div>
                    <button type="button" class="settingBtn changePasswordBtn" id="changePasswordBtn">Change</button>
                </div>
                <div class="settingItem">
                    <div class="settingInfo">
                        <p class="settingTitle">Delete Account</p>
                        <p class="settingDesc">This action cannot be undone</p>
                    </div>
                    <button type="button" class="settingBtn deleteAccountBtn" id="deleteAccountBtn">Delete</button>
                </div>
            </div>
           </div>

        <div class="registrationDetails notificationSettings">
            <div class="profile123">
                <p class="profileDesc"> Notification Settings</p>
                    <i class="material-icons profileIcon" style="color:rgb(66, 133, 244);">notifications</i>
            </div>
            <div class="notificationContainer">
                <div class="notificationItem">
                    <div class="notificationInfo">
                        <p class="notificationTitle">Email Notifications</p>
                        <p class="notificationDesc">Receive notifications via email</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="emailNotif" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="notificationItem">
                    <div class="notificationInfo">
                        <p class="notificationTitle">Complaint Updates</p>
                        <p class="notificationDesc">Updates on complaint status</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="complaintNotif" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
           </div>

    </div>
</div>
<script>
    fetch('../backend/getuser.php')
            .then(response => response.json())
            .then(data => {
                if (data.fullName) {
                    document.querySelector('.username').textContent = data.fullName;
                }
            })
            .catch(error => console.error('Error loading user info:', error));
</script>

</body>
</html>
